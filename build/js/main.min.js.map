{"version":3,"file":"main.min.js","sources":["main.min.js"],"sourcesContent":["'use strict';\r\n\r\nconst API = 'https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses';\r\n\r\n\r\n\r\n//Конструктор для создания списка товаров на странице\r\n\r\nclass GoodsList {\r\n  constructor(container = '.products') {\r\n    this.container = container;\r\n    this.goods = [];\r\n    this.allProducts = [];\r\n    this._makeGETRequest()\r\n      .then(data => {\r\n        this.goods = [...data];\r\n        this.render();\r\n      });\r\n  }\r\n\r\n  _makeGETRequest() {\r\n    return fetch(`${API}/catalogData.json`)\r\n      .then(result => result.json())\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n  render() {\r\n    const block = document.querySelector(this.container);\r\n    for (let product of this.goods) {\r\n      const productObj = new GoodsItem(product);\r\n      this.allProducts.push(productObj);\r\n      block.insertAdjacentHTML('beforeend', productObj.render());\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\n//Конструктор для создания товара на странице\r\nclass GoodsItem {\r\n  constructor(product, img = 'img/noimage.jpg', title = 'Product Name', price = 'Is unknown') {\r\n    this.id = product.id_product;\r\n    this.img = product.img || img;\r\n    this.title = product.product_name || title;\r\n    this.price = product.price || price;\r\n  }\r\n  render() {\r\n    return `<div class='products__item' data-id=\"${this.id}\">\r\n            <img src=${this.img} class='products__item-img' alt='Изображение товара'>\r\n            <h3 class='products__item-title'>${this.title}</h3>\r\n            <p class='products__item-text'>${this.price} rub.</p>\r\n            <button class='products__item-btn'>Add</button>\r\n          </div>`;\r\n  }\r\n}\r\n\r\nlet list = new GoodsList();\r\n\r\n\r\n//Конструктор для создания корзины \r\n\r\nclass CartList {\r\n\r\n  constructor(container = '.cart-popup__content') {\r\n    this.container = container;\r\n    this.goods = [];\r\n    this.allProducts = [];\r\n    this._makeGETRequest()\r\n      .then(data => {\r\n        this.goods = [...data.contents];\r\n        this.amount = data.amount;\r\n        this.countGoods = data.countGoods;\r\n        this.render();\r\n        this.delete();\r\n      });\r\n\r\n  }\r\n\r\n  _makeGETRequest() {\r\n    return fetch(`${API}/getBasket.json`)\r\n      .then(result => result.json())\r\n      .catch(error => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const block = document.querySelector(this.container);\r\n    const countGoods = document.querySelector('#countGoods');\r\n    const amount = document.querySelector('#amount');\r\n    for (let product of this.goods) {\r\n      const cartObj = new CartItem(product);\r\n      this.allProducts.push(cartObj);\r\n      block.insertAdjacentHTML('beforeend', cartObj.render());\r\n    }\r\n    countGoods.insertAdjacentHTML('beforeend', this.countGoods);\r\n    amount.insertAdjacentHTML('beforeend', `${this.amount} руб.`);\r\n  }\r\n\r\n  delete() { //Удалить товар из корзины      \r\n    for (let product of this.allProducts) {\r\n      console.log(product);\r\n      let btnDelete = document.querySelectorAll('.cart-popup__list-item--delete');\r\n      for (let item of btnDelete) {\r\n        item.addEventListener('click', () => {\r\n          item.parentElement.remove(product);\r\n        });\r\n      }\r\n    }\r\n  } //end delete()\r\n\r\n  recalculateAmountOfProducts() {} //  Пересчитать общую сумму всех товаров\r\n\r\n  placeOrder() {} // Оформить заказ\r\n\r\n} // end CartList\r\n\r\n\r\n//Конструктор для создания элемента корзины \r\n\r\nclass CartItem {\r\n  constructor(product, img = 'img/noimage.jpg', title = 'Product Name', price = 'Is unknown', quantity = 1) {\r\n    this.id = product.id_product;\r\n    this.img = product.img || img;\r\n    this.title = product.product_name || title;\r\n    this.price = product.price || price;\r\n    this.quantity = product.quantity || quantity;\r\n  }\r\n\r\n  render() {\r\n    return ` <ul class=\"cart-popup__list\">\r\n              <li class=\"cart-popup__list-item\" data-id=\"${this.id}\">\r\n                <img src=\"${this.img}\" alt=\"Изображение товара\">\r\n              </li>\r\n              <li class=\"cart-popup__list-item\">${this.title}</li>\r\n              <li class=\"cart-popup__list-item\">${this.price} руб.</li>\r\n              <li class=\"cart-popup__list-item\">${this.quantity}</li>\r\n              <li class=\"cart-popup__list-item\">${this.price * this.quantity} руб.</li>\r\n              <li class=\"cart-popup__list-item cart-popup__list-item--delete\" title=\"Удалить товар\">\r\n                <img class=\"cart-popup__delete\" src=\"img/delete-from-cart.ico\" alt=\"Удалить товар\">\r\n              </li>\r\n            </ul>`;\r\n  }\r\n\r\n  increaseProductQuantity() {} // Увеличить количество товара\r\n\r\n  reduceProductQuantity() {} // Уменьшить количество товара\r\n\r\n\r\n  recalculateAmountOfProduct() {} // Пересчитать сумму товара, в зависимости от количества\r\n\r\n}\r\n\r\nlet cartList = new CartList();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// Открытие модального окна корзины\r\nconst cart = document.querySelector('.cart-button');\r\nconst cartPopup = document.querySelector('.cart-popup');\r\n\r\ncart.addEventListener('click', () => {\r\n  cartPopup.classList.add('open');\r\n});\r\n\r\n// Закрытие модального окна корзины\r\nconst cartPopupClose = document.querySelector('.cart-popup__close');\r\n\r\ncartPopupClose.addEventListener('click', () => {\r\n  cartPopup.classList.remove('open');\r\n});\r\n\r\n\r\n\r\n// const goods = [{\r\n//     img: 'img/good-1.jpg',\r\n//     title: 'Shirt',\r\n//     price: 150\r\n//   },\r\n//   {\r\n//     img: 'img/good-2.jpg',\r\n//     title: 'Socks',\r\n//     price: 50\r\n//   },\r\n//   {\r\n//     img: 'img/good-3.jpg',\r\n//     title: 'Jacket',\r\n//     price: 350\r\n//   },\r\n//   {\r\n//     img: 'img/good-4.jpg',\r\n//     title: 'Shoes',\r\n//     price: 250\r\n//   },\r\n//   {},\r\n// ];\r\n\r\n// const renderGoodsItem = (img = 'img/noimage.jpg', title = 'Product Name', price = 'Is unknown') => {\r\n//   return `<div class='goods-item'>\r\n//             <img src=${img} class='goods-item__img' alt='Изображение товара'>\r\n//             <h3 class='goods-item__title'>${title}</h3>\r\n//             <p class='goods-item__text'>${price} rub.</p>\r\n//             <button class='goods-item__btn'>Add</button>\r\n//           </div>`;\r\n\r\n// };\r\n\r\n// const renderGoodsList = (list) => {\r\n//   let goodsList = list.map(item => renderGoodsItem(item.img, item.title, item.price));\r\n//   // document.querySelector('.goods-list').innerHTML = goodsList.join('');\r\n//   document.querySelector('.goods-list').innerHTML = list.map(item => renderGoodsItem(item.img, item.title, item.price)).join('');\r\n// };\r\n\r\n// const renderGoodsList = (list) => {\r\n//   let goodsList = list.map(item => renderGoodsItem(item.img, item.title, item.price));\r\n//   // document.querySelector('.goods-list').innerHTML = goodsList.join('');\r\n//   document.querySelector('.goods-list').innerHTML = list.map(item => renderGoodsItem(item.img, item.title, item.price)).join('');\r\n// };\r\n\r\n// renderGoodsList(goods);"],"names":["API","GoodsList","container","this","goods","allProducts","_makeGETRequest","then","data","render","fetch","result","json","catch","error","console","log","block","document","querySelector","product","productObj","GoodsItem","push","insertAdjacentHTML","img","title","price","id","id_product","product_name","list","CartList","contents","amount","countGoods","delete","cartObj","CartItem","item","querySelectorAll","addEventListener","parentElement","remove","quantity","cartList","cart","cartPopup","classList","add","cartPopupClose"],"mappings":"aAEA,MAAMA,IAAM,+FAMNC,sBACQC,EAAY,aACtBC,KAAKD,UAAYA,EACjBC,KAAKC,MAAQ,GACbD,KAAKE,YAAc,GACnBF,KAAKG,kBACFC,KAAKC,IACJL,KAAKC,MAAQ,IAAII,GACjBL,KAAKM,6BAKT,OAAOC,SAASV,wBACbO,KAAKI,GAAUA,EAAOC,QACtBC,MAAMC,IACLC,QAAQC,IAAIF,cAIhB,MAAMG,EAAQC,SAASC,cAAchB,KAAKD,WAC1C,IAAK,IAAIkB,KAAWjB,KAAKC,MAAO,CAC9B,MAAMiB,EAAa,IAAIC,UAAUF,GACjCjB,KAAKE,YAAYkB,KAAKF,GACtBJ,EAAMO,mBAAmB,YAAaH,EAAWZ,kBAQjDa,sBACQF,EAASK,EAAM,kBAAmBC,EAAQ,eAAgBC,EAAQ,cAC5ExB,KAAKyB,GAAKR,EAAQS,WAClB1B,KAAKsB,IAAML,EAAQK,KAAOA,EAC1BtB,KAAKuB,MAAQN,EAAQU,cAAgBJ,EACrCvB,KAAKwB,MAAQP,EAAQO,OAASA,WAG9B,8CAA+CxB,KAAKyB;uBACjCzB,KAAKsB;+CACmBtB,KAAKuB;6CACPvB,KAAKwB;;mBAMlD,IAAII,KAAO,IAAI9B,gBAKT+B,qBAEQ9B,EAAY,wBACtBC,KAAKD,UAAYA,EACjBC,KAAKC,MAAQ,GACbD,KAAKE,YAAc,GACnBF,KAAKG,kBACFC,KAAKC,IACJL,KAAKC,MAAQ,IAAII,EAAKyB,UACtB9B,KAAK+B,OAAS1B,EAAK0B,OACnB/B,KAAKgC,WAAa3B,EAAK2B,WACvBhC,KAAKM,SACLN,KAAKiC,6BAMT,OAAO1B,SAASV,sBACbO,KAAKI,GAAUA,EAAOC,QACtBC,MAAMC,IACLC,QAAQC,IAAIF,cAKhB,MAAMG,EAAQC,SAASC,cAAchB,KAAKD,WACpCiC,EAAajB,SAASC,cAAc,eACpCe,EAAShB,SAASC,cAAc,WACtC,IAAK,IAAIC,KAAWjB,KAAKC,MAAO,CAC9B,MAAMiC,EAAU,IAAIC,SAASlB,GAC7BjB,KAAKE,YAAYkB,KAAKc,GACtBpB,EAAMO,mBAAmB,YAAaa,EAAQ5B,UAEhD0B,EAAWX,mBAAmB,YAAarB,KAAKgC,YAChDD,EAAOV,mBAAmB,eAAgBrB,KAAK+B,wBAI/C,IAAK,IAAId,KAAWjB,KAAKE,YAAa,CACpCU,QAAQC,IAAII,GAEZ,IAAK,IAAImB,KADOrB,SAASsB,iBAAiB,kCAExCD,EAAKE,iBAAiB,QAAS,KAC7BF,EAAKG,cAAcC,OAAOvB,0DAe9BkB,qBACQlB,EAASK,EAAM,kBAAmBC,EAAQ,eAAgBC,EAAQ,aAAciB,EAAW,GACrGzC,KAAKyB,GAAKR,EAAQS,WAClB1B,KAAKsB,IAAML,EAAQK,KAAOA,EAC1BtB,KAAKuB,MAAQN,EAAQU,cAAgBJ,EACrCvB,KAAKwB,MAAQP,EAAQO,OAASA,EAC9BxB,KAAKyC,SAAWxB,EAAQwB,UAAYA,WAIpC;2DACuDzC,KAAKyB;4BACpCzB,KAAKsB;;kDAEiBtB,KAAKuB;kDACLvB,KAAKwB;kDACLxB,KAAKyC;kDACLzC,KAAKwB,MAAQxB,KAAKyC;;;;sGAgBpE,IAAIC,SAAW,IAAIb,SASnB,MAAMc,KAAO5B,SAASC,cAAc,gBAC9B4B,UAAY7B,SAASC,cAAc,eAEzC2B,KAAKL,iBAAiB,QAAS,KAC7BM,UAAUC,UAAUC,IAAI,UAI1B,MAAMC,eAAiBhC,SAASC,cAAc,sBAE9C+B,eAAeT,iBAAiB,QAAS,KACvCM,UAAUC,UAAUL,OAAO"}